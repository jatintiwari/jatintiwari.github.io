import{S as n,i as a,s,v as t,j as e,e as o,a as p,w as c,b as i,d as l,q as r,m as u,n as k,x as d,g as h}from"./vendor-a1aa6816.js";import{B as g}from"./common-5e807c31.js";function m(n){let a,s,m,f,y,w,b,T,v,H,M,L,j,C,x,S,q,I,z,$,N,B,R,W,A,J,E,F,K,U,D,G,O,P,Q,V,X,Y,Z,_,nn,an,sn,tn,en,on,pn,cn,ln,rn,un,kn,dn,hn,gn,mn,fn,yn,wn,bn,Tn,vn,Hn,Mn,Ln,jn,Cn,xn,Sn,qn,In,zn;return a=new g({props:{date:"27 June 2022",title:"Code splitting With Svelte"}}),{c(){t(a.$$.fragment),s=e(),m=o("p"),m.innerHTML="Svelte is gaining a lot of traction these days. It is easy to implement and learn. The main reason i have started using Svelte is that it is <b><em>not opinionated</em></b>.\nMostly, I just have to write what actually is required - HTML, CSS and JS and do not worry about the optimizations.",f=e(),y=o("p"),y.innerHTML="But, as the application grows the end users of any application has to pay the price. The hidden cost of downloading mega chunks of JS and CSS resources. We can optimize this via using extra efficient systems and techniques in place e.g. <code>CDN, Browser Cache, Uglify/Minify</code> are a few basic optimizations techniques. As you see, It does not reduce the actual amount of code that is being parsed on the browser.",w=e(),b=o("table"),b.innerHTML="<thead><tr><th>Type</th> \n<th>Transferred</th> \n<th>Actual Size</th></tr></thead> \n<tbody><tr><td>js</td> \n<td>39.59 KB</td> \n<td>100.63KB</td></tr></tbody>",T=e(),v=o("p"),v.innerHTML="The <em>Actual Size</em> is what the browser has parse. This in itself is a bottle neck in old/low-end devices. <b>JS is everywhere</b> now and We must optimize the experience for everyone.",H=e(),M=o("p"),M.innerHTML="<em>We can squeeze the air out of a pillow with a vaccum device. Even after that, there is still piece of mass that requires space in our storage.</em>",L=e(),j=o("p"),j.textContent="We can further reduce the amount of code with help of dynamic imports and keep our application as lean as possible.",C=e(),x=o("p"),x.textContent="The idea behind the code splitting is simple - Load only the part of application code which is required to render the particular route the user is visiting.",S=e(),q=o("p"),q.innerHTML="The code splitting of the <b>route resources</b> can further be bifurcated into above the fold and below the fold content (there is no straight way of doing it).",I=e(),z=o("h3"),z.innerHTML='<div align="center">Enough talking, Here is the code!</div>',$=e(),N=o("p"),N.innerHTML="I have a route based application, where each route loads an async <code>Component</code>.",B=e(),R=o("pre"),W=e(),A=o("p"),A.innerHTML="To load the component async and do something while it loads, I did write a util function which handles the loading and returns the default export of the <code>es</code> module.",J=e(),E=o("pre"),F=e(),K=o("p"),K.textContent="The above function is called for each route.",U=e(),D=o("pre"),G=e(),O=o("p"),O.innerHTML="<em>Notice the <code>artilce.component</code> is a function which is evoked when the route is matched.</em>",P=e(),Q=o("p"),Q.textContent="This is the bare minimum code which is required for creating dynamic chunks during the build processes.",V=e(),X=o("h4"),X.textContent="Other changes",Y=e(),Z=o("ul"),_=o("li"),nn=o("p"),nn.innerHTML="<code>rollup.config.js</code>",an=e(),sn=o("pre"),tn=e(),en=o("p"),en.innerHTML="<code>format</code> for dynamic chunks is <em>“es”</em> instead of <em>iife</em>. A directory path to save the chunks is provided as <code>dir</code>.",on=e(),pn=o("li"),pn.innerHTML="<p><code>index.html</code></p>",cn=e(),ln=o("pre"),rn=e(),un=o("p"),un.innerHTML="The main chunk has to added as <em>type=“module”</em>",kn=e(),dn=o("h4"),dn.textContent="Final result",hn=e(),gn=o("p"),gn.innerHTML="Chunks are create with <code>chunkName-[hash].js</code>",mn=e(),fn=o("p"),fn.innerHTML='<img src="https://user-images.githubusercontent.com/10477804/175859365-085a3232-d7ed-4b6c-ad97-1bc9f58d9cc6.png" alt="chunks"/>',yn=e(),wn=o("p"),wn.innerHTML="This can be configured with <code>chunkFileNames</code> property in <code>rollup.config.js</code>",bn=e(),Tn=o("pre"),vn=e(),Hn=o("h4"),Hn.textContent="Network requests",Mn=e(),Ln=o("p"),Ln.innerHTML="Inside the <code>index.html</code> we need to add only the the main bundle i.e. <code>thought.js</code> in our case. It has all the information of the chunks that has been created. It loads them in sync to boot the application.",jn=e(),Cn=o("p"),Cn.innerHTML='<img src="https://user-images.githubusercontent.com/10477804/175859805-b4b911cd-3152-4bfb-aeb1-ad22820dc0cc.png" alt="network-calls"/>',xn=e(),Sn=o("h4"),Sn.textContent="Useful resources",qn=e(),In=o("ul"),In.innerHTML='<li><a href="https://github.com/Rich-Harris/rollup-svelte-code-splitting" rel="nofollow">Github Repo by Rich Harris</a></li> \n<li><a href="https://hacks.mozilla.org/2015/08/es6-in-depth-modules/" rel="nofollow">ES6 modules</a></li>',p(R,"class","language-js"),p(E,"class","language-js"),p(D,"class","language-svelte"),p(sn,"class","language-js"),p(ln,"class","language-html"),p(Tn,"class","language-js")},m(n,t){c(a,n,t),i(n,s,t),i(n,m,t),i(n,f,t),i(n,y,t),i(n,w,t),i(n,b,t),i(n,T,t),i(n,v,t),i(n,H,t),i(n,M,t),i(n,L,t),i(n,j,t),i(n,C,t),i(n,x,t),i(n,S,t),i(n,q,t),i(n,I,t),i(n,z,t),i(n,$,t),i(n,N,t),i(n,B,t),i(n,R,t),R.innerHTML='<code class="language-js"><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">&#123;</span>\n        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">\'/svelte-code-splitting\'</span><span class="token punctuation">,</span>\n        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Svelte Code splitting\'</span><span class="token punctuation">,</span>\n        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">\'./markdown/code-splitting-svelte.md\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span></code>',i(n,W,t),i(n,A,t),i(n,J,t),i(n,E,t),E.innerHTML='<code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">getComponent</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">const</span> component <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> module<span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> component<span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>',i(n,F,t),i(n,K,t),i(n,U,t),i(n,D,t),D.innerHTML='<code class="language-svelte"><span class="token each"><span class="token punctuation">&#123;</span><span class="token keyword">#each</span> <span class="token language-javascript">articles </span><span class="token keyword">as</span> <span class="token language-javascript">article<span class="token punctuation">&#125;</span></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">path=</span><span class="token language-javascript"><span class="token punctuation">&#123;</span>article<span class="token punctuation">.</span>path<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span>\n      <span class="token language-javascript"><span class="token punctuation">&#123;</span>#<span class="token keyword">await</span> <span class="token function">getComponent</span><span class="token punctuation">(</span>article<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> then Component<span class="token punctuation">&#125;</span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Component</span> <span class="token punctuation">/></span></span>\n      <span class="token language-javascript"><span class="token punctuation">&#123;</span><span class="token operator">/</span><span class="token keyword">await</span><span class="token punctuation">&#125;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Route</span><span class="token punctuation">></span></span>\n<span class="token each"><span class="token punctuation">&#123;</span><span class="token keyword">/each</span><span class="token punctuation">&#125;</span></span></code>',i(n,G,t),i(n,O,t),i(n,P,t),i(n,Q,t),i(n,V,t),i(n,X,t),i(n,Y,t),i(n,Z,t),l(Z,_),l(_,nn),l(_,an),l(_,sn),sn.innerHTML='<code class="language-js">  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>\n    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">\'es\'</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'thoughts\'</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">dir</span><span class="token operator">:</span> <span class="token string">\'thoughts/dist/js\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">&#125;</span></code>',l(_,tn),l(_,en),l(Z,on),l(Z,pn),i(n,cn,t),i(n,ln,t),ln.innerHTML='<code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/dist/js/thoughts.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code>',i(n,rn,t),i(n,un,t),i(n,kn,t),i(n,dn,t),i(n,hn,t),i(n,gn,t),i(n,mn,t),i(n,fn,t),i(n,yn,t),i(n,wn,t),i(n,bn,t),i(n,Tn,t),Tn.innerHTML='<code class="language-js"><span class="token function-variable function">chunkFileNames</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">chunkInfo</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>chunkInfo<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.js</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></code>',i(n,vn,t),i(n,Hn,t),i(n,Mn,t),i(n,Ln,t),i(n,jn,t),i(n,Cn,t),i(n,xn,t),i(n,Sn,t),i(n,qn,t),i(n,In,t),zn=!0},p:r,i(n){zn||(u(a.$$.fragment,n),zn=!0)},o(n){k(a.$$.fragment,n),zn=!1},d(n){d(a,n),n&&h(s),n&&h(m),n&&h(f),n&&h(y),n&&h(w),n&&h(b),n&&h(T),n&&h(v),n&&h(H),n&&h(M),n&&h(L),n&&h(j),n&&h(C),n&&h(x),n&&h(S),n&&h(q),n&&h(I),n&&h(z),n&&h($),n&&h(N),n&&h(B),n&&h(R),n&&h(W),n&&h(A),n&&h(J),n&&h(E),n&&h(F),n&&h(K),n&&h(U),n&&h(D),n&&h(G),n&&h(O),n&&h(P),n&&h(Q),n&&h(V),n&&h(X),n&&h(Y),n&&h(Z),n&&h(cn),n&&h(ln),n&&h(rn),n&&h(un),n&&h(kn),n&&h(dn),n&&h(hn),n&&h(gn),n&&h(mn),n&&h(fn),n&&h(yn),n&&h(wn),n&&h(bn),n&&h(Tn),n&&h(vn),n&&h(Hn),n&&h(Mn),n&&h(Ln),n&&h(jn),n&&h(Cn),n&&h(xn),n&&h(Sn),n&&h(qn),n&&h(In)}}}class f extends n{constructor(n){super(),a(this,n,null,m,s,{})}}export{f as default};
